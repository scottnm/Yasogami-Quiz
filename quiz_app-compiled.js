var Character=function(a,b,c,d){this.name=a;this.description=b;this.percentageThreshold=c;this.image=d},Question=function(a,b,c,d){this.month=a;this.question=b;this.answers=c;this.correctIndex=d;this.element=null},processCharacters=function(a){for(var b in a.characters){var c=a.characters[b];characters.push(new Character(c.name,c.description,c.percentageThreshold,c.image))}},processQuestions=function(a){for(var b in a.months)for(var c in a.months[b]){var d=a.months[b][c];questions.push(new Question(b,
d.question,d.answers,d.correctIndex))}},currentQuestion=null,currentQuestionIndex=0,characters=[],questions=[],prevButton=document.querySelector("button#prev");prevButton.addEventListener("click",prevButtonHandler);var nextButton=document.querySelector("button#next");nextButton.addEventListener("click",nextButtonHandler);var submitButton=document.querySelector("button#submit");submitButton.addEventListener("click",submitButtonHandler);
function constructDom(){for(var a in questions){var b=questions[a],c=document.createElement("div");c.classList.add("question");c.setAttribute("data-state","next");c.setAttribute("id",a);var d=document.createElement("h3");c.appendChild(d);d.innerText="Question "+(Number(a)+1);d=document.createElement("h2");d.innerText=b.question;c.appendChild(d);var d=document.createElement("div"),g;for(g in b.answers){var e=document.createElement("div"),f=document.createElement("input");f.setAttribute("type","radio");
f.setAttribute("name",a);f.setAttribute("id",a+"_"+g);var h=document.createElement("span");h.innerHTML=b.answers[g];e.appendChild(f);e.appendChild(h);e.classList.add("radio");d.appendChild(e)}c.appendChild(d);c.addEventListener("transitionend",function(a){a.target.setAttribute("data-hidden","true")});document.querySelector(".question-lane").appendChild(c);questions[a].element=c}}
function shuffleQuestions(){for(var a=[];questions.length;){var b=Math.floor(Math.random()*questions.length);a.push(questions.splice(b,1)[0])}questions=a}function selectInitialElement(){currentQuestion=questions[0].element;currentQuestion.setAttribute("data-state","active");currentQuestionIndex=0}
function prevButtonHandler(){currentQuestion.setAttribute("data-state","next");--currentQuestionIndex;currentQuestion=questions[currentQuestionIndex].element;currentQuestion.removeAttribute("data-hidden");currentQuestion.setAttribute("data-state","active");currentQuestionIndex||(prevButton.disabled=!0);nextButton.disabled=!1;submitButton.disabled=!0}
function nextButtonHandler(){currentQuestion.setAttribute("data-state","prev");currentQuestionIndex+=1;currentQuestion=questions[currentQuestionIndex].element;currentQuestion.removeAttribute("data-hidden");currentQuestion.setAttribute("data-state","active");currentQuestionIndex===questions.length-1&&(nextButton.disabled=!0,submitButton.disabled=!1);prevButton.disabled=!1}
function submitButtonHandler(){debugger;var a=0,b;for(b in questions)correctAnswer(questions[b])&&(a+=1);a=determineCharacter(a/questions.length*100);constructResultCard(a)}function correctAnswer(a){var b=a.element.querySelector("input"),c=-1,d;for(d in b)b[d].checked&&(c=d);return c===a.correctIndex}function determineCharacter(a){for(var b in characters)if(0>=a-characters[b].percentageThreshold)return characters[b]}function constructResultCard(a){document.body.remove();console.log(a)}processCharacters(charData);
processQuestions(questionData);shuffleQuestions();constructDom();selectInitialElement();
